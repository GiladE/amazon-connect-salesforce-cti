<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.2">
<link rel="search" type="application/opensearchdescription+xml" title="Amazon Connect Salesforce CTI Adapter" href="/amazon-connect-salesforce-cti/opensearch.xml"><title data-react-helmet="true">CTI Adapter Configuration | Amazon Connect Salesforce CTI Adapter</title><meta data-react-helmet="true" property="og:url" content="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/classic/cti-adapter/01-cti-adapter-configuration"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="CTI Adapter Configuration | Amazon Connect Salesforce CTI Adapter"><meta data-react-helmet="true" name="description" content="The CTI Adapter installed by the managed package provides a number of"><meta data-react-helmet="true" property="og:description" content="The CTI Adapter installed by the managed package provides a number of"><link data-react-helmet="true" rel="shortcut icon" href="/amazon-connect-salesforce-cti/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/classic/cti-adapter/01-cti-adapter-configuration"><link data-react-helmet="true" rel="alternate" href="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/classic/cti-adapter/01-cti-adapter-configuration" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/classic/cti-adapter/01-cti-adapter-configuration" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/amazon-connect-salesforce-cti/assets/css/styles.72280d89.css">
<link rel="preload" href="/amazon-connect-salesforce-cti/assets/js/runtime~main.c8b8a721.js" as="script">
<link rel="preload" href="/amazon-connect-salesforce-cti/assets/js/main.0040afaa.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/amazon-connect-salesforce-cti/"><img src="/amazon-connect-salesforce-cti/img/logo.svg" alt="v5.15" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/amazon-connect-salesforce-cti/img/logo.svg" alt="v5.15" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">v5.15</b></a><a class="navbar__item navbar__link" href="/amazon-connect-salesforce-cti/docs/lightning/notices">Lightning</a><a class="navbar__item navbar__link" href="/amazon-connect-salesforce-cti/docs/classic/notices">Classic</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/amazon-connect-salesforce-cti/docs/other/earlier-versions">Earlier Versions</a><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti/tree/main/pdf" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>PDF<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/amazon-connect-salesforce-cti/"><img src="/amazon-connect-salesforce-cti/img/logo.svg" alt="v5.15" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/amazon-connect-salesforce-cti/img/logo.svg" alt="v5.15" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">v5.15</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/lightning/notices">Lightning</a></li><li class="menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/classic/notices">Classic</a></li><li class="menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/other/earlier-versions">Earlier Versions</a></li><li class="menu__list-item"><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti/tree/main/pdf" target="_blank" rel="noopener noreferrer" class="menu__link"><span>PDF<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti" target="_blank" rel="noopener noreferrer" class="menu__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu menu--responsive thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/classic/notices">Notices</a></li><li class="menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/classic/release-notes">Release Notes</a></li><li class="menu__list-item"><a class="menu__link menuLinkText_2aKo">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/introduction/01-key-benefits-and-requirements">Key Benefits and Requirements</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2aKo">Installation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/installation/01-installation">Installing the CTI Adapter and Salesforce Lambdas</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/installation/02-guided-setup">Setting Up The CTI Adapter Using Guided Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/installation/03-managed-package-manual-setup">Setting Up The CTI Adapter Managed Package Manually</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/installation/04-salesforce-lambdas-manual-setup">Setting Up The Salesforce Lambdas Manually</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/installation/05-upgrading-from-an-earlier-version">Upgrading from an Earlier Version</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/installation/06-cti-adapter-installation-troubleshooting">CTI Adapter Installation Troubleshooting and Common Issues</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2aKo">CTI Adapter</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/01-cti-adapter-configuration">CTI Adapter Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/02-omnipresence-agent-state-sync">Omnipresence Agent State Sync</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/03-contact-attributes-display">Contact Attributes Display</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/04-call-recording-playback">Call Recording Playback</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/05-call-display-account-page">Call Display on the Account Page</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/06-outbound-campaign-calls">Outbound Campaign Calls</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/07-amazon-connect-reports">Amazon Connect Reports in Salesforce</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/08-cti-flows">CTI Flows</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/09-localization">Localization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/10-cti-actions">CTI Actions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/11-recording-controls">Recording Controls</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/12-chat-widget-integration">Chat Widget Integration</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2aKo">Salesforce Lambdas</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/salesforce-lambdas/01-contact-flow-salesforce-lambdas">Invoking the Amazon Connect Salesforce Lambda in a Contact Flow</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2aKo">Appendices</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/appendices/appendix-a-cti-flow-sources-and-events/01-cti-flow-sources-and-events">Appendix A: CTI Flow Sources and Events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/appendices/appendix-b-configuring-salesforce-as-your-identity-provider/01-configuring-salesforce-as-your-identity-provider">Appendix B: Configuring Salesforce as Your Identity Provider</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/appendices/appendix-c-cti-flow-examples/01-cti-flow-examples">Appendix C: CTI Flow Examples</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/appendices/appendix-d-cti-flow-blocks/01-cti-flow-blocks">Appendix D: CTI Flow Blocks</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">CTI Adapter Configuration</h1></header><p>The CTI Adapter installed by the managed package provides a number of
features that change or enhance the functionality of the integration. By
default, many of these features have been configured during install with
a default setting. This section will detail the options available.</p><img src="/amazon-connect-salesforce-cti/img/classic/image82.png"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="cti-adapter-details"></a>CTI Adapter Details<a class="hash-link" href="#cti-adapter-details" title="Direct link to heading">#</a></h2><ol><li><p><strong>CTI Adapter Name:</strong> provide a unique name for this CTI adapter
definition</p></li><li><p><strong>Amazon Connect Instance:</strong> This was configured in a previous
section. This is the instance url for your Amazon Connect
instance.</p></li><li><p><strong>Amazon Connect Instance Region:</strong> This is the code for the region
that you have deployed your Amazon Connect instance to. This is
required for the Amazon Connect chat APIs to work correctly. If you
do not use the chat feature of Amazon Connect, this field is not
necessary</p></li><li><p><strong>Custom Ringtone:</strong> This allows for overriding the built-in
ringtone with any browser-supported audio file accessible by the
user.</p></li><li><p><strong>Call Center Definition Name:</strong> This was configured in a previous
section. This is the internal name of the Call Center configured in
Salesforce setup. This value links the CTI Adapter to the Call
Center, and ultimately to the agents.</p></li><li><p><strong>Softphone Popout Enabled:</strong> Salesforce supports softphone pop out
in Console and Lightning Experience modes. When the softphone is
popped out, it opens in a new browser window external to the
Salesforce UI. This is helpful in use cases where the call controls
are regularly needed but the agent also needs full access to the
entire console.</p></li><li><p><strong>Debug Level:</strong> For future use</p></li><li><p><strong>Medialess:</strong> Amazon Connect supports running in VDI environments,
however best practice is to send the actual audio stream via a
separate CCP. Selecting the medialess option will configure the
Salesforce CCP to run in medialess mode, which provides the data
that Salesforce needs for screenpop while the audio is streamed to a
local CCP.</p></li><li><p><strong>Presence Sync Enabled:</strong> This setting allows the adapter to use
the presence rules to sync state from Amazon Connect to Salesforce
Omni-Channel.</p></li><li><p><strong>Audio Device Settings</strong> Turning this setting on allows the Agent
to setup a custom audio device for their speaker, microphone and
ringer in the adapter (Speaker and Ringer settings not available on Firefox).
You may have to add this field to the layout manually. <a href="/amazon-connect-salesforce-cti/docs/classic/installation/06-cti-adapter-installation-troubleshooting">See troubleshooting</a>.</p></li><li><p><strong>Phone Type Settings</strong> Turning this setting on allows the Agent to
change their Phone Type in the CCP. You may have to add this field to
the layout manually. <a href="/amazon-connect-salesforce-cti/docs/classic/installation/06-cti-adapter-installation-troubleshooting">See troubleshooting</a></p></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="single-sign-on-settings"></a>Single Sign On Settings<a class="hash-link" href="#single-sign-on-settings" title="Direct link to heading">#</a></h2><p>The Amazon Connect CTI Adapter supports single sign on(SSO) via SAML
integration. This allows customers that use a SAML provider for
authentication into Amazon Connect. You will need the SSO URL for your
provider and the Relay State settings for your Amazon Connect instance.</p><p>For general information on configuring SAML for Amazon Connect, please
refer to: <a href="https://docs.aws.amazon.com/connect/latest/adminguide/configure-saml" target="_blank" rel="noopener noreferrer">Amazon Connect Administrator Guide: Configure SAML for
Identity Management in Amazon
Connect</a>.</p><p>If you wish to use <strong>Salesforce</strong> as your identity provider for Single
Sign On, please follow the setup instructions in <a href="/amazon-connect-salesforce-cti/docs/classic/appendices/appendix-b-configuring-salesforce-as-your-identity-provider/01-configuring-salesforce-as-your-identity-provider">Appendix B - Configuring Salesforce as Your Identity Provider</a>.</p><p>For information about configuring specific SAML providers to work with
Amazon Connect:</p><ul><li><p><a href="https://aws.amazon.com/blogs/contact-center/enabling-federation-with-aws-single-sign-on-and-amazon-connect/" target="_blank" rel="noopener noreferrer">AWS Single
Sign-On</a></p></li><li><p><a href="https://aws.amazon.com/blogs/contact-center/configure-single-sign-on-for-amazon-connect-using-okta/" target="_blank" rel="noopener noreferrer">Okta</a></p></li></ul><p>Once you have your SAML integration working with Amazon Connect, you
will need to create the Amazon Connect Single Sign On URL and validate
that it works correctly, then configure the Lightning CTI adapter and
login the agent.</p><blockquote><p><strong>Note: With the new Amazon Connect instance urls (<code>*.my.connect.aws</code>) you must put the full URL into the <code>Amazon Connect Instance</code> field in the AC CTI Adapter record for SSO to work. Ex: using <code>https://myinstance.my.connect.aws</code> instead of <code>my instance</code>.</strong></p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="identify-the-sso-url-components"></a>Identify the SSO URL components<a class="hash-link" href="#identify-the-sso-url-components" title="Direct link to heading">#</a></h3><p>In order to authenticate with Amazon Connect, you need your IdP login
URL from your SAML provider and a relay state URL that will redirect the
authenticated user to your Amazon Connect instance.</p><p>Your IdP Login URL will resemble the following (Salesforce is shown):</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">https://mXXXXXXrun-dev-ed.my.salesforce.com/idp/login?app=0sp0N000000Caid</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The &#x27;RelayState&#x27; will be in the following format:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">https://console.aws.amazon.com/connect/federate/[object Object]?destination=%2Fconnect%2Fccp</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Please note that &quot;console.aws.amazon.com&quot; refers to US-East-1 region (N.
Virginia). If your Amazon Connect instance is in a different region,
please use the region Console URL. For example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">https://us-west-2.console.aws.amazon.com/connect/federate/[object Object]?destination=%2Fconnect%2Fccp</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="configure-the-cti-lightning-adapter-in-salesforce"></a>Configure the CTI Lightning Adapter in Salesforce<a class="hash-link" href="#configure-the-cti-lightning-adapter-in-salesforce" title="Direct link to heading">#</a></h3><p>Now we are ready to complete the last step in the configuration process:
Adding the SSO settings to the Lightning Adapter. This will configure
the adapter to authenticate via SSO and redirect to the Amazon Connect
Contact Control Panel once authentication completes.</p><ol><li><p>Log in into your Salesforce org and go to the <strong>Service Console</strong></p></li><li><p>Expand the <strong>navigation menu</strong> by selecting the down arrow and
choose <strong>AC CTI Adapters</strong>.</p></li></ol><img src="/amazon-connect-salesforce-cti/img/classic/image83.png"><ol start="3"><li><p>Select <strong>ACLightningAdapter</strong></p></li><li><p>Scroll down to the Single SignOn (SSO) section and choose the pencil
icon of either field to edit</p></li></ol><img src="/amazon-connect-salesforce-cti/img/classic/image84.png"><ol start="5"><li><p>For the SSO Url, paste your IdP login URL up to the first question
mark (if one exists). A couple of examples are provided:</p><p>Salesforce:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">https://mXXXXXXrun-dev-ed.my.salesforce.com/idp/login?app=0sp0N000000Caid</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Microsoft ADFS:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">https://sts.yourcorp.com/adfs/ls/idpinitiatedsignon.aspx</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li><p>Paste this portion of the URL into the <strong>SSO Url</strong> field</p></li></ol><img src="/amazon-connect-salesforce-cti/img/classic/image85.png"><ol start="7"><li><p>For the SSO Relay State:</p><p>IF you had a question mark in your login URL, paste everything AFTER
the question mar into the SSO Relay state field, then add
&amp;RelayState= to the end, and append your relay state URL.
For example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">app=0sp0N000000Caid&amp;RelayState=https://console.aws.amazon.com/connect/federate/[object Object]?destination=%2Fconnect%2Fccp</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>IF you did not have a Question Mark, then enter &amp;RelayState= into
the SSO Relay State field and append your relay statue URL to it.
For example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&amp;RelayState=https://console.aws.amazon.com/connect/federate/[object Object]?destination=%2Fconnect%2Fccp</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li><p>Example of a completed SSO section (Salesforce is shown)</p></li></ol><img src="/amazon-connect-salesforce-cti/img/classic/image86.png"><ol start="9"><li><p>Choose <strong>Save</strong></p></li><li><p><strong>Refresh</strong> your browser to make the changes take effect</p><p>a.  <strong>NOTE:</strong> If you receive a blocked popup warning, select the
warning and change the setting to always allow popups from your
Salesforce org, then refresh the browser again</p></li></ol><img src="/amazon-connect-salesforce-cti/img/classic/image87.png"><ol start="11"><li>After a few seconds, a new window should pop up for a moment. This
window is performing the authentication and setting your session
cookie. Once it does this, it will close automatically.</li></ol><img src="/amazon-connect-salesforce-cti/img/classic/image88.png"><ol start="12"><li><p>Once the authentication window closes, select the <strong>phone icon</strong> in
the console toolbar to open the CCP
Note: You may also receive popups to allow notifications and
microphone access. Please accept both.</p></li><li><p>You should now see the authenticated and logged in CCP</p></li></ol><img src="/amazon-connect-salesforce-cti/img/classic/image89.png"><p>SSO Configuration is complete</p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti/docs/classic/03-cti-adapter/01-cti-adapter-configuration.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/amazon-connect-salesforce-cti/docs/classic/installation/06-cti-adapter-installation-troubleshooting"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« CTI Adapter Installation Troubleshooting and Common Issues</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/02-omnipresence-agent-state-sync"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Omnipresence Agent State Sync Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#cti-adapter-details" class="table-of-contents__link">CTI Adapter Details</a></li><li><a href="#single-sign-on-settings" class="table-of-contents__link">Single Sign On Settings</a><ul><li><a href="#identify-the-sso-url-components" class="table-of-contents__link">Identify the SSO URL components</a></li><li><a href="#configure-the-cti-lightning-adapter-in-salesforce" class="table-of-contents__link">Configure the CTI Lightning Adapter in Salesforce</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Amazon.com, Inc. or its affiliates. All Rights Reserved.</div></div></div></footer></div>
<script src="/amazon-connect-salesforce-cti/assets/js/runtime~main.c8b8a721.js"></script>
<script src="/amazon-connect-salesforce-cti/assets/js/main.0040afaa.js"></script>
</body>
</html>