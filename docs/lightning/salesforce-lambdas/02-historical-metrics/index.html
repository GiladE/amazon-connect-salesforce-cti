<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.2">
<link rel="search" type="application/opensearchdescription+xml" title="Amazon Connect Salesforce CTI Adapter" href="/amazon-connect-salesforce-cti/opensearch.xml"><title data-react-helmet="true">Amazon Connect Historical Metrics in Salesforce | Amazon Connect Salesforce CTI Adapter</title><meta data-react-helmet="true" property="og:url" content="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/02-historical-metrics"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Amazon Connect Historical Metrics in Salesforce | Amazon Connect Salesforce CTI Adapter"><meta data-react-helmet="true" name="description" content="Amazon Connect can generate a number of historical metric reports to"><meta data-react-helmet="true" property="og:description" content="Amazon Connect can generate a number of historical metric reports to"><link data-react-helmet="true" rel="shortcut icon" href="/amazon-connect-salesforce-cti/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/02-historical-metrics"><link data-react-helmet="true" rel="alternate" href="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/02-historical-metrics" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/02-historical-metrics" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/amazon-connect-salesforce-cti/assets/css/styles.2f50ecb5.css">
<link rel="preload" href="/amazon-connect-salesforce-cti/assets/js/runtime~main.c53fba2b.js" as="script">
<link rel="preload" href="/amazon-connect-salesforce-cti/assets/js/main.58c4fa48.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/amazon-connect-salesforce-cti/"><img src="/amazon-connect-salesforce-cti/img/logo.svg" alt="v5.19" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/amazon-connect-salesforce-cti/img/logo.svg" alt="v5.19" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">v5.19</b></a><a class="navbar__item navbar__link" href="/amazon-connect-salesforce-cti/docs/lightning/notices">Lightning</a><a class="navbar__item navbar__link" href="/amazon-connect-salesforce-cti/docs/classic/notices">Classic</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/amazon-connect-salesforce-cti/docs/other/earlier-versions">Earlier Versions</a><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti/tree/main/pdf" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>PDF<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/amazon-connect-salesforce-cti/"><img src="/amazon-connect-salesforce-cti/img/logo.svg" alt="v5.19" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/amazon-connect-salesforce-cti/img/logo.svg" alt="v5.19" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">v5.19</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/lightning/notices">Lightning</a></li><li class="menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/classic/notices">Classic</a></li><li class="menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/other/earlier-versions">Earlier Versions</a></li><li class="menu__list-item"><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti/tree/main/pdf" target="_blank" rel="noopener noreferrer" class="menu__link"><span>PDF<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti" target="_blank" rel="noopener noreferrer" class="menu__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu menu--responsive thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/lightning/notices">Notices</a></li><li class="menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/lightning/release-notes">Release Notes</a></li><li class="menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/lightning/introduction/01-key-benefits">Key Benefits and Requirements</a></li><li class="menu__list-item"><a class="menu__link menuLinkText_2aKo">Installation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/01-installation">Installing the CTI Adapter and Salesforce Lambdas</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/02-guided-setup">Setting Up The CTI Adapter Using Guided Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/03-managed-package-manual-setup">Setting Up The CTI Adapter Managed Package Manually</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/04-salesforce-lambdas-manual-setup">Setting Up The Salesforce Lambdas Manually</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/05-upgrading-from-an-earlier-version">Upgrading from an Earlier Version</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/06-adapter-installation-troubleshooting">CTI Adapter Installation Troubleshooting and Common Issues</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2aKo">CTI Adapter</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/01-cti-adapter-configuration">CTI Adapter Details</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/02-cti-attributes">CTI Attributes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/03-cti-flows">CTI Flow</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/04-presence-sync-rules">Presence Sync Rules</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/05-localization">Localization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/06-set-agent-status-on-session-end">Set Agent Status on Session End</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/07-contact-lens">Contact Lens</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/08-cti-actions">CTI Actions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/09-recording-controls">Recording Controls</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/10-voicemail-drops">Voicemail Drops</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/11-chat-widget-integration">Chat Widget Integration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/12-wisdom-integration">Wisdom Integration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/13-voice-id">Voice Id</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2aKo">Salesforce Lambdas</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/01-contact-flow-salesforce-lambdas">Accessing the Salesforce API from Amazon Connect Contact Flows Using AWS Lambda</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/02-historical-metrics">Amazon Connect Historical Metrics in Salesforce</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/03-real-time-metrics">Amazon Connect Real-Time Metrics in Salesforce</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/04-contact-channel-analytics">Contact Channel Analytics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/05-contact-trace-record-import">Contact Trace Record Import</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/06-postcall-contact-lens-import">Postcall Contact Lens Import</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2aKo">Appendices</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLinkText_2aKo" tabindex="0">Appendix A: Required Salesforce Configurations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-a-required-salesforce-configurations/01-configuring-my-domain">Configuring My Domain in Salesforce</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-a-required-salesforce-configurations/02-configure-salesforce-omnichannel">Configure Salesforce Omnichannel for Testing</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-b-configuring-salesforce-as-your-identity-provider/01-configuration">Appendix B: Configuring Salesforce as Your Identity Provider</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-c-cti-flow-sources-and-events/01-cti-flow-sources-and-events">Appendix C: CTI Flow Sources and Events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-d-cti-flow-examples/01-cti-flow-examples">Appendix D: CTI Flow Examples</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-e-salesforce-high-velocity-sales/01-high-velocity-sales">Appendix E: Integration with Salesforce High Velocity Sales</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-f-cti-flow-blocks/01-cti-flow-blocks">Appendix F: CTI Flow Blocks</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">Amazon Connect Historical Metrics in Salesforce</h1></header><p>Amazon Connect can generate a number of historical metric reports to
monitor efficiency and utilization, agent performance, and other
information about your contact center. Amazon Connect provides you the
ability to schedule execution and export of reports, in comma separated
value (CSV) format, to the S3 bucket of your choice. This enables broad
compatibility across many analytics and WFM tools.</p><p>With the AWS Serverless Repository for Salesforce, you can configure the
automatic import of reporting data from Amazon Connect into Salesforce.
Two different historical reports are available to transport Agent and
Queue interval data from Amazon Connect to Salesforce. Once these have
been configured and scheduled, you will begin to see data available in
the reports that have been included with the CTI Adapter.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="configuring-the-aws-services"></a>Configuring the AWS Services<a class="hash-link" href="#configuring-the-aws-services" title="Direct link to heading">#</a></h3><p>When you configure schedule reports to run in Amazon Connect, they are
saved to your reporting Amazon S3 bucket upon execution. As a part of
the schedule configuration, you can determine the frequency with which
data is exported. The standard configuration is for execution every 30
minutes; however you can increase the interval time to suit your
requirements.</p><p>Once you have the reports configured and scheduled, you will then need
to activate the trigger for the reports bucket that will invoke an AWS
Lambda function included in the AWS Serverless Repository for
Salesforce. This function will process the report and import the data to
Salesforce.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="configuring-the-historical-reports-in-amazon-connect"></a>Configuring the Historical Reports in Amazon Connect<a class="hash-link" href="#configuring-the-historical-reports-in-amazon-connect" title="Direct link to heading">#</a></h4><ol><li><p>Login to your Amazon Connect instance as an Administrator</p></li><li><p>From the left navigation, choose <strong>Metrics and Quality</strong> then select
<strong>Historical metrics</strong></p></li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image178.png"><ol start="3"><li>On the <strong>Historical metrics</strong> page, select Contact metrics</li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image179.png"><ol start="4"><li><p>Once the <strong>Historical metrics: Queues</strong> report loads, select the cog
in the upper right to edit the report</p></li><li><p>On the <strong>Interval &amp; Tim</strong>e range tab, set the parameters as follows:</p><p>a.  Interval: 30 minutes</p><p>b.  Time Zone: UTC</p><p>c.  Time Range: Last 24 Hours</p></li><li><p>Leave the <strong>Groupings</strong> and <strong>Filters</strong> tabs set to their defaults</p></li><li><p>Select the <strong>Metrics</strong> Tab.</p></li><li><p>Select ALL selectable options</p></li><li><p>Select <strong>Apply</strong></p></li><li><p>Once the report saves, select the dropdown menu next to the Save
button and choose Schedule</p></li><li><p>Set the name as <strong>sfIntervalQueue</strong> and choose <strong>Continue</strong></p></li><li><p>On the <strong>Note</strong> screen, choose <strong>Continue</strong></p></li><li><p>On the <strong>Recurrence</strong> tab in the Schedule Report setup, set the
options as:</p><p>a.  Generate this report: Hourly</p><p>b.  Every: 0.5 hour(s)</p><p>c.  Starting at: 1AM</p><p>d.  For the Previous: 0.5 hour(s)</p></li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image180.png"><ol start="14"><li><p>Select the <strong>Delivery Options</strong> tab</p></li><li><p>In the Prefix field, enter <strong>SFDC/Queue</strong></p></li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image181.png"><ol start="16"><li>Note the File name. The file name contains the bucket, path, and
filename that will be used when executing the report. You will use
the <strong>bucket name</strong> and <strong>path</strong> in later steps.</li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image182.png"><ol start="17"><li><p>Choose <strong>Create</strong></p></li><li><p>Once the report is created, from the left navigation, choose
<strong>Metrics and Quality</strong> then select <strong>Historical metrics</strong></p></li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image178.png"><ol start="19"><li>On the <strong>Historical metrics</strong> page, select <strong>Agent performance</strong></li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image183.png"><ol start="20"><li><p>Once the <strong>Historical metrics: Agents</strong> report loads, select the cog
in the upper right to edit the report</p></li><li><p>On the <strong>Interval &amp; Tim</strong>e range tab, set the parameters as follows:</p><p>a.  Interval: 30 minutes</p><p>b.  Time Zone: UTC</p><p>c.  Time Range: Last 24 Hours</p></li><li><p>Leave the <strong>Groupings</strong> and <strong>Filters</strong> tabs set to their defaults</p></li><li><p>Select the <strong>Metrics</strong> Tab.</p></li><li><p>Select the following metrics (deselect any others):</p></li></ol><p><strong>Note</strong> You should be able to use all metrics, but these are the important ones.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">-   After contact work time</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-   Agent on contact time</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-   Agent idle time</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-   Non-Productive Time</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-   Average after contact work time</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-   Average handle time</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-   Average customer hold time</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-   Average agent interaction and customer hold time</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-   Average agent interaction time</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-   Contacts agent hung up first</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-   Contacts handled</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-   Contacts handled incoming</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-   Contacts handled outbound</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-   Contacts put on hold</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-   Contacts hold disconnect</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-   Contacts transferred out</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-   Contacts transferred out internal</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-   Contacts transferred out external</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-   Error status time</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-   Agent answer rate</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-   Agent non-response</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-   Occupancy</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-   Online time</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-   Agent interaction and hold time</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-   Agent interaction time</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-   Average outbound agent interaction time</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-   Average outbound after contact work time</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ol start="25"><li><p>Select <strong>Apply</strong></p></li><li><p>Once the report saves, select the dropdown menu next to the Save
button and choose Schedule</p></li><li><p>Set the name as <strong>sfIntervalAgent</strong> and choose <strong>Continue</strong></p></li><li><p>On the <strong>Note</strong> screen, choose <strong>Continue</strong></p></li><li><p>On the <strong>Recurrence</strong> tab in the Schedule Report setup, set the
options as:</p><p>a.  Generate this report: Hourly</p><p>b.  Every: 0.5 hour(s)</p><p>c.  Starting at: 1AM</p><p>d.  For the Previous: 0.5 hour(s)</p></li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image184.png"><ol start="30"><li><p>Select the <strong>Delivery Options</strong> tab</p></li><li><p>In the Prefix field, enter <strong>SFDC/Agent</strong></p></li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image185.png"><ol start="32"><li>Note the File name. The file name contains the bucket, path, and
filename that will be used when executing the report. You will use
the <strong>bucket name</strong> and <strong>path</strong> in later steps.</li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image186.png"><ol start="33"><li>Choose <strong>Create</strong></li></ol><p>Once you have created the two reports and set their schedule, the next
thing you will need to do is to configure a trigger that executes a
Lambda function when the report is generated and stored in S3.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="creating-the-aws-lambda-trigger-for-the-queue-data"></a>Creating the AWS Lambda Trigger for the Queue Data<a class="hash-link" href="#creating-the-aws-lambda-trigger-for-the-queue-data" title="Direct link to heading">#</a></h4><ol><li><p>In a new browser tab, login to the <a href="https://console.aws.amazon.com/" target="_blank" rel="noopener noreferrer">AWS
console</a></p></li><li><p>Open the <a href="https://console.aws.amazon.com/lambda/home" target="_blank" rel="noopener noreferrer">AWS Lambda
Console</a></p></li><li><p>In the Add filter field of the AWS Lambda console, enter
sfIntervalQueue and press enter to filter the list of functions</p></li><li><p>Select the Lambda function that includes sfIntervalQueue in the name</p></li><li><p>Expand the Designer section</p></li><li><p>Select Add trigger</p></li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image187.png"><ol start="7"><li>In Trigger configuration, select S3 from the dropdown list</li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image188.png"><ol start="8"><li><p>Referring to the notes from the report configuration earlier, select
the appropriate bucket</p></li><li><p>Change the Event type to PUT</p></li><li><p>Referring to the notes from the report configuration earlier, set
the Prefix to the path value for your report</p></li><li><p>Set the Suffix to .csv</p></li><li><p>The trigger configuration should now be similar to the following:</p></li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image189.png"><ol start="13"><li><p>Select <strong>Add</strong></p></li><li><p>If everything has been configured correctly, you should receive a
success message.</p></li></ol><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="creating-the-aws-lambda-trigger-for-the-agent-data"></a>Creating the AWS Lambda Trigger for the Agent Data<a class="hash-link" href="#creating-the-aws-lambda-trigger-for-the-agent-data" title="Direct link to heading">#</a></h4><ol><li><p>In a new browser tab, login to the <a href="https://console.aws.amazon.com/" target="_blank" rel="noopener noreferrer">AWS
console</a></p></li><li><p>Open the <a href="https://console.aws.amazon.com/lambda/home" target="_blank" rel="noopener noreferrer">AWS Lambda
Console</a></p></li><li><p>In the Add filter field of the AWS Lambda console, enter
sfIntervalAgent and press enter to filter the list of functions</p></li><li><p>Select the Lambda function that includes sfIntervalAgent in the name</p></li><li><p>Expand the Designer section</p></li><li><p>Select Add trigger</p></li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image187.png"><ol start="7"><li>In Trigger configuration, select S3 from the dropdown list</li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image188.png"><ol start="8"><li><p>Referring to the notes from the report configuration earlier, select
the appropriate bucket</p></li><li><p>Change the Event type to PUT</p></li><li><p>Referring to the notes from the report configuration earlier, set
the Prefix to the path value for your report</p></li><li><p>Set the Suffix to .csv</p></li><li><p>The trigger configuration should now be similar to the following:</p></li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image190.png"><ol start="13"><li><p>Select <strong>Add</strong></p></li><li><p>If everything has been configured correctly, you should receive a
success message.</p></li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="verifying-the-data-import-in-salesforce"></a>Verifying the Data Import in Salesforce<a class="hash-link" href="#verifying-the-data-import-in-salesforce" title="Direct link to heading">#</a></h3><p>Once you have configured the reports and added the triggers, you should
start to see data in Salesforce after ~30 minutes. The Amazon Connect
CTI Adapter comes with a predefined set of reports. These reports can be
customized and additional reports can be created by leveraging the
imported data.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="viewing-amazon-connect-reports-in-salesforce"></a>Viewing Amazon Connect Reports in Salesforce<a class="hash-link" href="#viewing-amazon-connect-reports-in-salesforce" title="Direct link to heading">#</a></h4><ol><li><p>Log in into your Salesforce org and go to the <strong>Service Console</strong></p></li><li><p>Expand the <strong>navigation menu</strong> by selecting the down arrow and
choose <strong>Reports</strong></p></li><li><p>In the left Navigation, select <strong>All Folders</strong></p></li><li><p>Select the <strong>Amazon Connect Reports</strong> folder</p></li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image191.png"><ol start="5"><li>In the list of reports, choose Average Handle Time queue report</li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image192.png"><ol start="6"><li>Once the report loads, you should see data (provided calls have
queued in this Amazon Connect instance today)</li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image193.png"></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti/docs/lightning/04-salesforce-lambdas/02-historical-metrics.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/01-contact-flow-salesforce-lambdas"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Accessing the Salesforce API from Amazon Connect Contact Flows Using AWS Lambda</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/03-real-time-metrics"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Amazon Connect Real-Time Metrics in Salesforce Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#configuring-the-aws-services" class="table-of-contents__link">Configuring the AWS Services</a></li><li><a href="#verifying-the-data-import-in-salesforce" class="table-of-contents__link">Verifying the Data Import in Salesforce</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Amazon.com, Inc. or its affiliates. All Rights Reserved.</div></div></div></footer></div>
<script src="/amazon-connect-salesforce-cti/assets/js/runtime~main.c53fba2b.js"></script>
<script src="/amazon-connect-salesforce-cti/assets/js/main.58c4fa48.js"></script>
</body>
</html>