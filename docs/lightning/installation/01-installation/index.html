<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.2">
<link rel="search" type="application/opensearchdescription+xml" title="Amazon Connect Salesforce CTI Adapter" href="/amazon-connect-salesforce-cti/opensearch.xml"><title data-react-helmet="true">Installing the CTI Adapter and Salesforce Lambdas | Amazon Connect Salesforce CTI Adapter</title><meta data-react-helmet="true" property="og:url" content="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/lightning/installation/01-installation"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Installing the CTI Adapter and Salesforce Lambdas | Amazon Connect Salesforce CTI Adapter"><meta data-react-helmet="true" name="description" content="Amazon Connect Salesforce CTI Adapter Managed Package"><meta data-react-helmet="true" property="og:description" content="Amazon Connect Salesforce CTI Adapter Managed Package"><link data-react-helmet="true" rel="shortcut icon" href="/amazon-connect-salesforce-cti/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/lightning/installation/01-installation"><link data-react-helmet="true" rel="alternate" href="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/lightning/installation/01-installation" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/lightning/installation/01-installation" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/amazon-connect-salesforce-cti/assets/css/styles.72280d89.css">
<link rel="preload" href="/amazon-connect-salesforce-cti/assets/js/runtime~main.7efc260f.js" as="script">
<link rel="preload" href="/amazon-connect-salesforce-cti/assets/js/main.9820b0c6.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/amazon-connect-salesforce-cti/"><img src="/amazon-connect-salesforce-cti/img/logo.svg" alt="v5.16" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/amazon-connect-salesforce-cti/img/logo.svg" alt="v5.16" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">v5.16</b></a><a class="navbar__item navbar__link" href="/amazon-connect-salesforce-cti/docs/lightning/notices">Lightning</a><a class="navbar__item navbar__link" href="/amazon-connect-salesforce-cti/docs/classic/notices">Classic</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/amazon-connect-salesforce-cti/docs/other/earlier-versions">Earlier Versions</a><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti/tree/main/pdf" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>PDF<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/amazon-connect-salesforce-cti/"><img src="/amazon-connect-salesforce-cti/img/logo.svg" alt="v5.16" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/amazon-connect-salesforce-cti/img/logo.svg" alt="v5.16" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">v5.16</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/lightning/notices">Lightning</a></li><li class="menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/classic/notices">Classic</a></li><li class="menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/other/earlier-versions">Earlier Versions</a></li><li class="menu__list-item"><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti/tree/main/pdf" target="_blank" rel="noopener noreferrer" class="menu__link"><span>PDF<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti" target="_blank" rel="noopener noreferrer" class="menu__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu menu--responsive thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/lightning/notices">Notices</a></li><li class="menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/lightning/release-notes">Release Notes</a></li><li class="menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/lightning/introduction/01-key-benefits">Key Benefits and Requirements</a></li><li class="menu__list-item"><a class="menu__link menuLinkText_2aKo">Installation</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/01-installation">Installing the CTI Adapter and Salesforce Lambdas</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/02-guided-setup">Setting Up The CTI Adapter Using Guided Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/03-managed-package-manual-setup">Setting Up The CTI Adapter Managed Package Manually</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/04-salesforce-lambdas-manual-setup">Setting Up The Salesforce Lambdas Manually</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/05-upgrading-from-an-earlier-version">Upgrading from an Earlier Version</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/06-adapter-installation-troubleshooting">CTI Adapter Installation Troubleshooting and Common Issues</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2aKo">CTI Adapter</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/01-cti-adapter-configuration">CTI Adapter Details</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/02-cti-attributes">CTI Attributes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/03-cti-flows">CTI Flow</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/04-presence-sync-rules">Presence Sync Rules</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/05-localization">Localization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/06-set-agent-status-on-session-end">Set Agent Status on Session End</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/07-contact-lens">Contact Lens</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/08-cti-actions">CTI Actions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/09-recording-controls">Recording Controls</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/10-voicemail-drops">Voicemail Drops</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/11-chat-widget-integration">Chat Widget Integration</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2aKo">Salesforce Lambdas</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/01-contact-flow-salesforce-lambdas">Accessing the Salesforce API from Amazon Connect Contact Flows Using AWS Lambda</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/02-historical-metrics">Amazon Connect Historical Metrics in Salesforce</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/03-real-time-metrics">Amazon Connect Real-Time Metrics in Salesforce</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/04-contact-channel-analytics">Contact Channel Analytics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/05-contact-trace-record-import">Contact Trace Record Import</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/06-postcall-contact-lens-import">Postcall Contact Lens Import</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2aKo">Appendices</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLinkText_2aKo" tabindex="0">Appendix A: Required Salesforce Configurations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-a-required-salesforce-configurations/01-configuring-my-domain">Configuring My Domain in Salesforce</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-a-required-salesforce-configurations/02-configure-salesforce-omnichannel">Configure Salesforce Omnichannel for Testing</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-b-configuring-salesforce-as-your-identity-provider/01-configuration">Appendix B: Configuring Salesforce as Your Identity Provider</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-c-cti-flow-sources-and-events/01-cti-flow-sources-and-events">Appendix C: CTI Flow Sources and Events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-d-cti-flow-examples/01-cti-flow-examples">Appendix D: CTI Flow Examples</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-e-salesforce-high-velocity-sales/01-high-velocity-sales">Appendix E: Integration with Salesforce High Velocity Sales</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-f-cti-flow-blocks/01-cti-flow-blocks">Appendix F: CTI Flow Blocks</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">Installing the CTI Adapter and Salesforce Lambdas</h1></header><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="amazon-connect-salesforce-cti-adapter-managed-package"></a>Amazon Connect Salesforce CTI Adapter Managed Package<a class="hash-link" href="#amazon-connect-salesforce-cti-adapter-managed-package" title="Direct link to heading">#</a></h3><p>The Amazon Connect CTI Adapter for Salesforce provides the core
integration between the two platforms. It embeds the Amazon Connect
Contact Control Panel into Salesforce which provides telephony control
as well as access to event data coming from Amazon Connect. Using this
adapter, you can configure screen pops based on customer data, automate
contact center telephony functions like click-to-dial, and establish
presence syncing rules for integration with Salesforce Omni-Channel.
This is the base of the integration.</p><p>The first step in the deployment of the integration is to install the
Amazon Connect CTI Adapter managed package from the AppExchange
Marketplace.</p><ol><li><p>Log in into your Salesforce org and go to <strong>Setup</strong></p></li><li><p>In the <strong>Quick Find</strong>, type <strong>AppExchange</strong> (the results will
populate without hitting enter)</p></li><li><p>Select <strong>AppExchange Marketplace</strong> from the links provided</p></li><li><p>In the AppExchange window, enter <strong>Amazon Connect</strong> into the
<strong>Search AppExchange</strong> field and press enter</p></li><li><p>In the <strong>Search Results</strong>, select <strong>Amazon Connect CTI Adapter</strong></p></li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image3.png"><ol start="6"><li>On the <strong>Amazon Connect CTI Adapter</strong> detail page, select <strong>Get It
Now</strong></li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image4.png"><ol start="7"><li>If you are presented with the Log In to AppExchange screen, select
<strong>Open Login Screen</strong>. You should then be presented with an Allow
Access Screen. Choose <strong>Allow</strong></li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image5.png"><ol start="8"><li>On the <strong>Where do you want to installÂ Amazon Connect CTI Adapter</strong>
page, choose the <strong>Install Here</strong> button in the Install in This Org
section</li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image6.png"><ol start="9"><li>On the <strong>Confirm installation details</strong> screen, fill out the <strong>Tell
us about yourself</strong> form, check the box to <strong>agree with the terms
and conditions</strong>, and optionally select the box to <strong>allow the
provider to contact you</strong>. Then select <strong>Confirm and Install</strong></li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image7.png"><ol start="10"><li>Select <strong>Install for Admins Only</strong>, then choose <strong>Install</strong>. <strong>THIS SELECTION IS VERY IMPORTANT</strong> - if you select the wrong option, then standard users may have access to objects and pages that they shouldn&#x27;t have access to.</li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image8.png"><ol start="11"><li><p>The CTI Adapter will take some time to install. While it installs,
you will be presented with the <strong>This app is taking a long time to
install screen.</strong></p></li><li><p>Choose <strong>Done</strong>.</p></li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image9.png"><ol start="13"><li><p>Once you receive confirmation that the <strong>installation has
completed</strong> via email, return to the browser</p></li><li><p>Close the <strong>Amazon Connect CTI Adapter</strong> detail page (if still open)</p></li><li><p>In Quick Find, enter <strong>Installed</strong>, then select Installed Packages
from the result</p></li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image10.png"><ol start="16"><li>Once the <strong>Installed Packages</strong> page opens, validate that the
<strong>Amazon Connect -- Universal Package</strong> is installed</li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image11.png"><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="amazon-connect-salesforce-lambda-package"></a>Amazon Connect Salesforce Lambda package<a class="hash-link" href="#amazon-connect-salesforce-lambda-package" title="Direct link to heading">#</a></h3><p>The Amazon Connect Salesforce Lambda package adds considerable
capability to the integration. It includes data connectivity between
Amazon Connect and Salesforce for typical tasks like lookups, case
creation, and updates. Additionally, it adds new features like real-time
and historical data imports, contact trace record imports, recording
import, transcription, and contact analytics functions. These
capabilities are configurable and can be activated or deactivated on a
call-by-call basis.</p><p>The Amazon Connect Salesforce Lambda package is delivered via the AWS
Serverless Application Repository. The AWS Serverless Application
Repository enables you to quickly deploy code samples, components, and
complete applications. Each application is packaged with an AWS
Serverless Application Model (SAM) template that defines the AWS
resources used. There is no additional charge to use the Serverless
Application Repository - you only pay for the AWS resources used in the
applications you deploy.</p><ol><li><p>In a new browser tab, login to the <a href="https://console.aws.amazon.com/" target="_blank" rel="noopener noreferrer">AWS
console</a></p></li><li><p>Make sure you are in the same region as your Amazon Connect instance</p></li><li><p>Once you have selected the region, navigate to the <a href="https://console.aws.amazon.com/connect/home" target="_blank" rel="noopener noreferrer">Amazon Connect
Console</a></p></li><li><p>Verify that the Amazon Connect instance that you wish to configure
is listed</p></li><li><p>Once you have verified your Amazon Connect instance, Open the
<a href="https://console.aws.amazon.com/serverlessrepo/home" target="_blank" rel="noopener noreferrer">Serverless Application Repository
Console</a></p></li><li><p>In the left navigation, select <strong>Available Applications</strong></p></li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image78.png"><ol start="7"><li>In the search area, make sure that <strong>Public applications</strong> is
selected, check the box for <strong>Show apps that create custom IAM roles
or resource policies</strong>, and enter <strong>Salesforce</strong> in the search
field, this will automatically filter the available packages</li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image79.png"><ol start="8"><li>Select AmazonConnectSalesForceLambda</li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image80.png"><ol start="9"><li><p>When the Application loads, scroll down to the <strong>Application
settings</strong> section</p></li><li><p>If you would like to use the Guided Setup feature, <strong>don&#x27;t change any parameters in the template</strong> and select <strong>Deploy</strong>,
and wait for the stack to finish deployment. Then, follow the section below on setting up the ExecuteAwsService named credential.
If you are not using the Guided Setup feature, navigate to <a href="/amazon-connect-salesforce-cti/docs/lightning/installation/03-managed-package-manual-setup">here</a> for manual setup instructions (skipping the rest of the instructions on the page).</p></li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image81.png"><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="setting-up-the-executeawsservice-named-credential"></a>Setting up the ExecuteAwsService Named Credential<a class="hash-link" href="#setting-up-the-executeawsservice-named-credential" title="Direct link to heading">#</a></h3><p>The ExecuteAwsService Named Credential is the entrypoint for the CTI Adapter to communicate with your AWS account.
The Apex code uses the Named Credential to call the <code>sfExecuteAwsService.py</code> lambda, which uses boto3 to make changes
in and retrieve data from your AWS account. Setting up this Named Credential is <strong>not required</strong> if you do not wish
to use the features that rely on it (Guided Setup and Contact Lens). In addition, you can alter the permissions given
to the <code>sfExecuteAwsService</code> lambda to match your security requirements (NOTE: if you choose to do so, do so after you
configure up the lambdas as some permissions are added/removed based on how the lambdas are configured).</p><p>Before you create the ExecuteAwsService Named Credential, <strong>confirm that the application was installed for admins only</strong>. If not, then standard users may be able to invoke methods that call named credentials. If you did this by accident, then you will have to <a href="/amazon-connect-salesforce-cti/docs/lightning/installation/06-adapter-installation-troubleshooting#how-to-remove-permissions-to-visualforce-pages-apex-classes-for-a-desired-profile">manually edit the profiles</a> to remove the permissions to the objects and pages created by the app.</p><img src="/amazon-connect-salesforce-cti/img/lightning/image8.png"><ol><li>Navigate to the IAM console in your AWS account, select the <strong>Users</strong> tab, and select <strong>Add Users</strong> to create a new user.</li></ol><img src="/amazon-connect-salesforce-cti/img/shared/installation0.png"><ol start="2"><li><p>Give your IAM user a name (like <em>sfExecuteAwsServiceIamUser</em>). For the Access type, select <strong>Programmatic access</strong>. Click Next.</p></li><li><p>Select <strong>Attach existing policies directly</strong>, then search for and select <em>invokeSfExecuteAWSServicePolicy</em>.</p></li></ol><img src="/amazon-connect-salesforce-cti/img/shared/installation1.png"><ol start="4"><li>Click next until the user is created. In the final screen, copy down the <strong>Access Key ID</strong> and the <strong>Secret Access Key</strong>.</li></ol><img src="/amazon-connect-salesforce-cti/img/shared/installation2.png"><ol start="5"><li>Next, navigate to the Lambda Console. In the functions tab, search for <em>sfExecuteAwsService</em>.</li></ol><img src="/amazon-connect-salesforce-cti/img/shared/installation3.png"><ol start="6"><li><p>Copy down the name of the function. Make sure you are not copying any extra characters.</p></li><li><p>Navigate to your setup section of your Salesforce instance, and search for <em>Named Credentials</em>.</p></li></ol><img src="/amazon-connect-salesforce-cti/img/shared/installation4.png"><ol start="8"><li>Select <strong>New Named Credential</strong>. For the values in the next screen, enter the following:</li></ol><ul><li><strong>Label</strong>: ExecuteAwsService</li><li><strong>URL</strong>: <code>https://lambda.{insert AWS region}.amazonaws.com/2015-03-31/functions/{insert lambda function name (copied above)}/invocations</code></li><li><strong>Identity Type</strong>: Named Principle</li><li><strong>Authentication Protocol</strong>: AWS Signature Version 4</li><li><strong>AWS Access Key ID</strong>: <strong>Access Key ID</strong> copied above</li><li><strong>AWS Secret Access Key</strong>: <strong>Secret Access Key</strong></li><li><strong>AWS Region</strong>: {insert AWS region}</li><li><strong>AWS Service</strong>: lambda</li></ul><img src="/amazon-connect-salesforce-cti/img/shared/installation5.png"><ol start="9"><li>Click <strong>Save</strong>.</li></ol><p>After following the above instructions, follow <a href="/amazon-connect-salesforce-cti/docs/lightning/installation/02-guided-setup">these instructions</a> to navigate to the Guided Setup feature.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti/docs/lightning/02-installation/01-installation.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/amazon-connect-salesforce-cti/docs/lightning/introduction/01-key-benefits"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Key Benefits and Requirements</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/amazon-connect-salesforce-cti/docs/lightning/installation/02-guided-setup"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Setting Up The CTI Adapter Using Guided Setup Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#amazon-connect-salesforce-cti-adapter-managed-package" class="table-of-contents__link">Amazon Connect Salesforce CTI Adapter Managed Package</a></li><li><a href="#amazon-connect-salesforce-lambda-package" class="table-of-contents__link">Amazon Connect Salesforce Lambda package</a></li><li><a href="#setting-up-the-executeawsservice-named-credential" class="table-of-contents__link">Setting up the ExecuteAwsService Named Credential</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Amazon.com, Inc. or its affiliates. All Rights Reserved.</div></div></div></footer></div>
<script src="/amazon-connect-salesforce-cti/assets/js/runtime~main.7efc260f.js"></script>
<script src="/amazon-connect-salesforce-cti/assets/js/main.9820b0c6.js"></script>
</body>
</html>