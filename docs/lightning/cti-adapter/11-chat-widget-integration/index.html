<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.2">
<link rel="search" type="application/opensearchdescription+xml" title="Amazon Connect Salesforce CTI Adapter" href="/amazon-connect-salesforce-cti/opensearch.xml"><title data-react-helmet="true">Chat Widget Integration | Amazon Connect Salesforce CTI Adapter</title><meta data-react-helmet="true" property="og:url" content="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/lightning/cti-adapter/11-chat-widget-integration"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Chat Widget Integration | Amazon Connect Salesforce CTI Adapter"><meta data-react-helmet="true" name="description" content="SalesForce Experience Cloud allows you to setup a website for your customers easily, with the included template, you can setup a help center, or a customer service website with just a few clicks. Amazon Connect CTI Adapter now provides you a chat-widget component, and you can use it in the Experience Cloud Builder App to add the Amazon Connect Chat Widget to any page you want."><meta data-react-helmet="true" property="og:description" content="SalesForce Experience Cloud allows you to setup a website for your customers easily, with the included template, you can setup a help center, or a customer service website with just a few clicks. Amazon Connect CTI Adapter now provides you a chat-widget component, and you can use it in the Experience Cloud Builder App to add the Amazon Connect Chat Widget to any page you want."><link data-react-helmet="true" rel="shortcut icon" href="/amazon-connect-salesforce-cti/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/lightning/cti-adapter/11-chat-widget-integration"><link data-react-helmet="true" rel="alternate" href="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/lightning/cti-adapter/11-chat-widget-integration" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/lightning/cti-adapter/11-chat-widget-integration" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/amazon-connect-salesforce-cti/assets/css/styles.72280d89.css">
<link rel="preload" href="/amazon-connect-salesforce-cti/assets/js/runtime~main.ffc7b237.js" as="script">
<link rel="preload" href="/amazon-connect-salesforce-cti/assets/js/main.70a2ce0a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/amazon-connect-salesforce-cti/"><img src="/amazon-connect-salesforce-cti/img/logo.svg" alt="Amazon Connect Salesforce CTI Adapter" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/amazon-connect-salesforce-cti/img/logo.svg" alt="Amazon Connect Salesforce CTI Adapter" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Amazon Connect Salesforce CTI Adapter</b></a><a class="navbar__item navbar__link" href="/amazon-connect-salesforce-cti/docs/lightning/notices">Lightning</a><a class="navbar__item navbar__link" href="/amazon-connect-salesforce-cti/docs/classic/notices">Classic</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti/tree/main/pdf" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>PDF<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/amazon-connect-salesforce-cti/"><img src="/amazon-connect-salesforce-cti/img/logo.svg" alt="Amazon Connect Salesforce CTI Adapter" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/amazon-connect-salesforce-cti/img/logo.svg" alt="Amazon Connect Salesforce CTI Adapter" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Amazon Connect Salesforce CTI Adapter</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/lightning/notices">Lightning</a></li><li class="menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/classic/notices">Classic</a></li><li class="menu__list-item"><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti/tree/main/pdf" target="_blank" rel="noopener noreferrer" class="menu__link"><span>PDF<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti" target="_blank" rel="noopener noreferrer" class="menu__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu menu--responsive thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/lightning/notices">Notices</a></li><li class="menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/lightning/release-notes">Release Notes</a></li><li class="menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/lightning/introduction/01-key-benefits">Key Benefits and Requirements</a></li><li class="menu__list-item"><a class="menu__link menuLinkText_2aKo">Installation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/01-installation">Installing the CTI Adapter and Salesforce Lambdas</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/02-guided-setup">Setting Up The CTI Adapter Using Guided Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/03-managed-package-manual-setup">Setting Up The CTI Adapter Managed Package Manually</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/04-salesforce-lambdas-manual-setup">Setting Up The Salesforce Lambdas Manually</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/05-upgrading-from-an-earlier-version">Upgrading from an Earlier Version</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/06-adapter-installation-troubleshooting">CTI Adapter Installation Troubleshooting and Common Issues</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2aKo">CTI Adapter</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/01-cti-adapter-configuration">CTI Adapter Details</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/02-cti-attributes">CTI Attributes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/03-cti-flows">CTI Flow</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/04-presence-sync-rules">Presence Sync Rules</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/05-localization">Localization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/06-set-agent-status-on-session-end">Set Agent Status on Session End</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/07-contact-lens">Contact Lens</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/08-cti-actions">CTI Actions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/09-recording-controls">Recording Controls</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/10-voicemail-drops">Voicemail Drops</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/11-chat-widget-integration">Chat Widget Integration</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2aKo">Salesforce Lambdas</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/01-contact-flow-salesforce-lambdas">Accessing the Salesforce API from Amazon Connect Contact Flows Using AWS Lambda</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/02-historical-metrics">Amazon Connect Historical Metrics in Salesforce</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/03-real-time-metrics">Amazon Connect Real-Time Metrics in Salesforce</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/04-contact-channel-analytics">Contact Channel Analytics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/05-contact-trace-record-import">Contact Trace Record Import</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/06-postcall-contact-lens-import">Postcall Contact Lens Import</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2aKo">Appendices</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLinkText_2aKo" tabindex="0">Appendix A: Required Salesforce Configurations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-a-required-salesforce-configurations/01-configuring-my-domain">Configuring My Domain in Salesforce</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-a-required-salesforce-configurations/02-configure-salesforce-omnichannel">Configure Salesforce Omnichannel for Testing</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-b-configuring-salesforce-as-your-identity-provider/01-configuration">Appendix B: Configuring Salesforce as Your Identity Provider</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-c-cti-flow-sources-and-events/01-cti-flow-sources-and-events">Appendix C: CTI Flow Sources and Events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-d-cti-flow-examples/01-cti-flow-examples">Appendix D: CTI Flow Examples</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-e-salesforce-high-velocity-sales/01-high-velocity-sales">Appendix E: Integration with Salesforce High Velocity Sales</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-f-cti-flow-blocks/01-cti-flow-blocks">Appendix F: CTI Flow Blocks</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">Chat Widget Integration</h1></header><p>SalesForce Experience Cloud allows you to setup a website for your customers easily, with the included template, you can setup a help center, or a customer service website with just a few clicks. Amazon Connect CTI Adapter now provides you a chat-widget component, and you can use it in the Experience Cloud Builder App to add the Amazon Connect Chat Widget to any page you want. </p><p>The screenshot below shows an example of having the chat widget added to a help center website. Please note that this feature does not support <strong>Build Your Own(LWR)</strong> and <strong>Salesforce Tabs + Visualforce</strong> template.</p><img src="/amazon-connect-salesforce-cti/img/lightning/chatwidget-(10).png">To start using this feature, you can either follow the steps below to setup an Experience Cloud Site for testing purpose, or you can skip to the next section if you are already familiar with SalesForce Experience Cloud. **Setup experience cloud site:**<ul><li>Go to Setup</li><li>Search for Digital Experience</li><li>Enable Digital Experience<img src="/amazon-connect-salesforce-cti/img/lightning/chatwidget-001.png"></li><li>Create a new Site by clicking New button<img src="/amazon-connect-salesforce-cti/img/lightning/chatwidget-002.png"></li><li>Choose Help center template to create a new site<img src="/amazon-connect-salesforce-cti/img/lightning/chatwidget-(0).png"></li><li>Go to Builder of the new site<img src="/amazon-connect-salesforce-cti/img/lightning/chatwidget-(1).png"></li><li>This will be the place to setup chat widget feature in the following sections. You can get yourself familiar with this Builder before moving to the next section.</li></ul><p><strong>Setup chat widget for your experience cloud sites.</strong></p><ul><li>Option 1: Setting up using out-of-box VisualForce page. Choose this if you need the chat widget only on one specific page. </li><li>Option 2: Setting up using Lightning Component based on VisualForce page. Choose this if you need the chat widget only on one specific page but you donâ€™t have the license for the VisualForce page component in the experience cloud builder. It is a workaround for Option1.</li><li>Option 3: Setting up using custom header. Choose this if you want the chat widget exists across all pages.</li></ul><p><strong>Option 1: Setting up using VisualForce page.</strong></p><ul><li>Follow instructions <a href="https://docs.aws.amazon.com/connect/latest/adminguide/add-chat-to-website.html" target="_blank" rel="noopener noreferrer">here</a> to setup your Chat Widget and copy the script to a text editor.</li><li>Go to Service Console</li><li>Go to AC CTI Adapter. If the CTI Adapter Owner is <code>Amazon Connect - Universal Package</code>, please update it to yourself or any other real user.</li><li>Go to Features tab</li><li>Click New to create a new Feature</li><li>In the Name field, put FEATURE_CHAT_WIDGET</li><li>In the Value field, input the following key value pairs based on your chat widget script. If you didnâ€™t enable the security feature of chat widget, you donâ€™t need to add the key value pair for authEndpoint</li></ul><p>Example ChatWidget key value pairs input</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;cloudfrontId&quot;: &quot;dg9yx063wiiht&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;widgetId&quot;: &quot;5338d219-92c7-427e-8b10-26a8f4dfb3d1&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;openChatColor&quot;: &quot;white&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;openChatBackgroundColor&quot;: &quot;#826359&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;closeChatColor&quot;: &quot;white&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;closeChatBackgroundColor&quot;: &quot;#940eb9&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;snippetId&quot;: &quot;QVFJREFIaUpTVGJkNWhNc0Q1WHpHYnFQTkJyYXN0.....=&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;authEndpoint&quot;: &quot;https://www.yourdomain.com/yourAuthEndpoint&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The input above is for the following example ChatWidget Script</p><img src="/amazon-connect-salesforce-cti/img/lightning/chatwidget-(16).png"><p>script:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;script type=&quot;text/javascript&quot;&gt;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  (function(w, d, x, id){</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    s=d.createElement(&#x27;script&#x27;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    s.src=&#x27;https://dg9yx063wiiht.cloudfront.net/amazon-connect-chat-interface-client.js&#x27;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    s.async=1;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    s.id=id;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    d.getElementsByTagName(&#x27;head&#x27;)[0].appendChild(s);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    w[x] =  w[x] || function() { (w[x].ac = w[x].ac || []).push(arguments) };</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  })(window, document, &#x27;amazon_connect&#x27;, &#x27;5338d219-92c7-427e-8b10-26a8f4dfb3d1&#x27;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  amazon_connect(&#x27;styles&#x27;, { openChat: { color: &#x27;white&#x27;, backgroundColor: &#x27;#826359&#x27;}, closeChat: { color: &#x27;white&#x27;, backgroundColor: &#x27;#940eb9&#x27;} });</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  amazon_connect(&#x27;snippetId&#x27;, &#x27;QVFJREFIaUpTVGJkNWhNc0Q1WHpHYnFQTkJyYXN0.....=&#x27;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/script&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Example Call back function for JWT</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">amazon_connect(&#x27;authenticate&#x27;, function(callback) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  window.fetch(&#x27;https://www.yourdomain.com/yourAuthEndpoint&#x27;).then(res =&gt; {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    res.json().then(data =&gt; {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      callback(data.data);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    });</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  });</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">});</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>Click Save</li><li>Go to Setup</li><li>Go to VisualForce page</li><li>Select AC_ChatWidget</li><li>Click Preview</li><li>You should see a chat icon on the right bottom corner. If not, check browser console for error messages</li><li>Copy the AC_ChatWidget visualforce page URL.</li><li>Go to your Experience Cloud Builder<img src="/amazon-connect-salesforce-cti/img/lightning/chatwidget-(2).png"></li><li>Open Components<img src="/amazon-connect-salesforce-cti/img/lightning/chatwidget-(3).png"></li><li>Drag and drop Visualforce Page to your page. If you didnâ€™t enable chat widget security, you need to change the Visualforce Page Name to AC_ChatWidget. If you enabled security for ChatWidget, change it to AC_ChatWidgetWithJWT<img src="/amazon-connect-salesforce-cti/img/lightning/chatwidget-(4).png"></li><li>Go to Settingsâ†’Generalâ†’Guest User Profile and click in to the Guest User Profile<img src="/amazon-connect-salesforce-cti/img/lightning/chatwidget-(5).png"></li><li>Inside Guest user profile, go to Enabled Visualforce Page Access</li><li>Add amazonconnect.AC_ChatWidget( or AC_ChatWidgetWithJWT if you have enabled security for chat widget)<img src="/amazon-connect-salesforce-cti/img/lightning/chatwidget-(6).png"></li><li>Click Save</li><li>Go to Enable Apex Class Access and add amazonconnect.AC_ChatWidgetController<img src="/amazon-connect-salesforce-cti/img/lightning/chatwidget-(7).png"></li><li>Click Publish button on the top right to publish the website<img src="/amazon-connect-salesforce-cti/img/lightning/chatwidget-(8).png"></li><li>Copy the published website URL in Settingsâ†’Published Status</li><li>Go back to Amazon Connect Chat Widget website, add following url to the allow-list Domains:<ul><li>The AC_ChatWidget visualforce page URL, remove everything after .com</li><li>The published website URL to chat widget allow-list origin, remove everything after .com</li></ul></li><li>Go to Setupâ†’Sharing Settings. Search for AC CTI Adapter Sharing Rules. Create a new Rule for Guest user so that they have the object access. Make sure in Step2 the Rule Type is Guest user access, the Steps 3 you put a proper criteria, for testing purpose you can put CTI Adapter Name not equal to 1. In Step 4 Share with the Guest user profile of the community website you are working on, and change the Access level to Read Only<img src="/amazon-connect-salesforce-cti/img/lightning/chatwidget-(9).png"></li></ul><p><strong><em> Verify the change:</em></strong>
Open your published website in a incognito window, you should be able to use chat widget to chat as a customer and chat to your agent without login
Note: If you want to setup chat widget for authorized user group only, you could change the settings to the guest profile to the authorized user profile.</p><p><strong>Option 2: Setting up using out-of-box Lightning Component.</strong></p><ul><li>Follow instructions <a href="https://docs.aws.amazon.com/connect/latest/adminguide/add-chat-to-website.html" target="_blank" rel="noopener noreferrer">here</a> to setup your Chat Widget and copy the script to a text editor.</li><li>Go to Service Console</li><li>Go to AC CTI Adapter. If the CTI Adapter Owner is <code>Amazon Connect - Universal Package</code>, please update it to yourself or any other real user.</li><li>Go to Features tab</li><li>Click New to create a new Feature</li><li>In the Name field, put FEATURE_CHAT_WIDGET</li><li>In the Value field, input the following key value pairs based on your chat widget script. If you didnâ€™t enable the security feature of chat widget, you donâ€™t need to add the key value pair for authEndpoint</li></ul><p>Example ChatWidget key value pairs input</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;cloudfrontId&quot;: &quot;dg9yx063wiiht&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;widgetId&quot;: &quot;5338d219-92c7-427e-8b10-26a8f4dfb3d1&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;openChatColor&quot;: &quot;white&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;openChatBackgroundColor&quot;: &quot;#826359&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;closeChatColor&quot;: &quot;white&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;closeChatBackgroundColor&quot;: &quot;#940eb9&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;snippetId&quot;: &quot;QVFJREFIaUpTVGJkNWhNc0Q1WHpHYnFQTkJyYXN0.....=&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;authEndpoint&quot;: &quot;https://www.yourdomain.com/yourAuthEndpoint&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The input above is for the following example ChatWidget Script</p><img src="/amazon-connect-salesforce-cti/img/lightning/chatwidget-(16).png"><p>script:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;script type=&quot;text/javascript&quot;&gt;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  (function(w, d, x, id){</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    s=d.createElement(&#x27;script&#x27;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    s.src=&#x27;https://dg9yx063wiiht.cloudfront.net/amazon-connect-chat-interface-client.js&#x27;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    s.async=1;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    s.id=id;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    d.getElementsByTagName(&#x27;head&#x27;)[0].appendChild(s);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    w[x] =  w[x] || function() { (w[x].ac = w[x].ac || []).push(arguments) };</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  })(window, document, &#x27;amazon_connect&#x27;, &#x27;5338d219-92c7-427e-8b10-26a8f4dfb3d1&#x27;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  amazon_connect(&#x27;styles&#x27;, { openChat: { color: &#x27;white&#x27;, backgroundColor: &#x27;#826359&#x27;}, closeChat: { color: &#x27;white&#x27;, backgroundColor: &#x27;#940eb9&#x27;} });</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  amazon_connect(&#x27;snippetId&#x27;, &#x27;QVFJREFIaUpTVGJkNWhNc0Q1WHpHYnFQTkJyYXN0.....=&#x27;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/script&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Example Call back function for JWT</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">amazon_connect(&#x27;authenticate&#x27;, function(callback) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  window.fetch(&#x27;https://www.yourdomain.com/yourAuthEndpoint&#x27;).then(res =&gt; {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    res.json().then(data =&gt; {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      callback(data.data);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    });</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  });</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">});</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>Click Save</li><li>Go to Setup</li><li>Go to VisualForce page</li><li>Select AC_ChatWidget</li><li>Click Preview</li><li>You should see a chat icon on the right bottom corner. If not, check browser console for error messages</li><li>Copy the AC_ChatWidget visualforce page URL.</li><li>Go to your Experience Cloud Builder<img src="/amazon-connect-salesforce-cti/img/lightning/chatwidget-(2).png"></li><li>Open Components<img src="/amazon-connect-salesforce-cti/img/lightning/chatwidget-(3).png"></li><li>Drag and drop iFrame Component to your page<img src="/amazon-connect-salesforce-cti/img/lightning/chatwidget-(12).png"></li><li>Change Chat Widget URL to <code> &lt;your-website-domain&gt;/apex/amazonconnect__AC_ChatWidget</code> if you did not enable the security for the chat widget. If you have enabled security, change it to <code> &lt;your-website-domain&gt;/apex/amazonconnect__AC_ChatWidgetWithJWT</code><ul><li>You will have the website domain once it is published. The URL is in Settingsâ†’Generalâ†’Published Status, and the part from <code>https</code> to <code>.com</code> is your website domain. If you havenâ€™t published it yet, you can update it once it is published and re-publish the website.</li><li>If you have site name, you need to append <code>/&lt;site-name&gt;</code> after your domain name. For example if the published website is <code>demo-developer-edition.na111.force.com/testing/s/</code>, your Chat Widget URL should be: <ul><li>If security disabled --&gt; <code>demo-developer-edition.na111.force.com/testing/amazonconnect__AC_ChatWidget</code></li><li>If security enabled --&gt; <code>demo-developer-edition.na111.force.com/testing/amazonconnect__AC_ChatWidgetWithJWT</code></li></ul></li></ul></li><li>Go to Settingsâ†’Generalâ†’Guest User Profile and click in to the Guest User Profile<img src="/amazon-connect-salesforce-cti/img/lightning/chatwidget-(5).png"></li><li>Inside Guest user profile, go to Enabled Visualforce Page Access</li><li>Add amazonconnect.AC_ChatWidget( or AC_ChatWidgetWithJWT if you have enabled security for chat widget)<img src="/amazon-connect-salesforce-cti/img/lightning/chatwidget-(6).png"></li><li>Click Save</li><li>Go to Enable Apex Class Access and add amazonconnect.AC_ChatWidgetController<img src="/amazon-connect-salesforce-cti/img/lightning/chatwidget-(7).png"></li><li>Click Publish button on the top right to publish the website<img src="/amazon-connect-salesforce-cti/img/lightning/chatwidget-(8).png"></li><li>Copy the published website URL in Settingsâ†’Published Status</li><li>Go back to Amazon Connect Chat Widget website, add following url to the allow-list Domains:<div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">* The AC_ChatWidget visualforce page URL, remove everything after .com</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">* The published website URL to chat widget allow-list origin, remove everything after .com</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><strong><em> Verify the change:</em></strong>
Open your published website in a incognito window, you should be able to use chat widget to chat as a customer and chat to your agent without login</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti/docs/lightning/03-cti-adapter/11-chat-widget-integration.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/10-voicemail-drops"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Voicemail Drops</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/01-contact-flow-salesforce-lambdas"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Accessing the Salesforce API from Amazon Connect Contact Flows Using AWS Lambda Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Amazon.com, Inc. or its affiliates. All Rights Reserved.</div></div></div></footer></div>
<script src="/amazon-connect-salesforce-cti/assets/js/runtime~main.ffc7b237.js"></script>
<script src="/amazon-connect-salesforce-cti/assets/js/main.70a2ce0a.js"></script>
</body>
</html>