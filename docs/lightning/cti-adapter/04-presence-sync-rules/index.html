<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.2">
<link rel="search" type="application/opensearchdescription+xml" title="Amazon Connect Salesforce CTI Adapter" href="/amazon-connect-salesforce-cti/opensearch.xml"><title data-react-helmet="true">Presence Sync Rules | Amazon Connect Salesforce CTI Adapter</title><meta data-react-helmet="true" property="og:url" content="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/lightning/cti-adapter/04-presence-sync-rules"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Presence Sync Rules | Amazon Connect Salesforce CTI Adapter"><meta data-react-helmet="true" name="description" content="The CTI Adapter supports bidirectional synchronization of agent state"><meta data-react-helmet="true" property="og:description" content="The CTI Adapter supports bidirectional synchronization of agent state"><link data-react-helmet="true" rel="shortcut icon" href="/amazon-connect-salesforce-cti/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/lightning/cti-adapter/04-presence-sync-rules"><link data-react-helmet="true" rel="alternate" href="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/lightning/cti-adapter/04-presence-sync-rules" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/lightning/cti-adapter/04-presence-sync-rules" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/amazon-connect-salesforce-cti/assets/css/styles.72280d89.css">
<link rel="preload" href="/amazon-connect-salesforce-cti/assets/js/runtime~main.c7e43b01.js" as="script">
<link rel="preload" href="/amazon-connect-salesforce-cti/assets/js/main.70a2ce0a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/amazon-connect-salesforce-cti/"><img src="/amazon-connect-salesforce-cti/img/logo.svg" alt="Amazon Connect Salesforce CTI Adapter" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/amazon-connect-salesforce-cti/img/logo.svg" alt="Amazon Connect Salesforce CTI Adapter" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Amazon Connect Salesforce CTI Adapter</b></a><a class="navbar__item navbar__link" href="/amazon-connect-salesforce-cti/docs/lightning/notices">Lightning</a><a class="navbar__item navbar__link" href="/amazon-connect-salesforce-cti/docs/classic/notices">Classic</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti/tree/main/pdf" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>PDF<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/amazon-connect-salesforce-cti/"><img src="/amazon-connect-salesforce-cti/img/logo.svg" alt="Amazon Connect Salesforce CTI Adapter" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/amazon-connect-salesforce-cti/img/logo.svg" alt="Amazon Connect Salesforce CTI Adapter" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Amazon Connect Salesforce CTI Adapter</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/lightning/notices">Lightning</a></li><li class="menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/classic/notices">Classic</a></li><li class="menu__list-item"><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti/tree/main/pdf" target="_blank" rel="noopener noreferrer" class="menu__link"><span>PDF<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti" target="_blank" rel="noopener noreferrer" class="menu__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu menu--responsive thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/lightning/notices">Notices</a></li><li class="menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/lightning/release-notes">Release Notes</a></li><li class="menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/lightning/introduction/01-key-benefits">Key Benefits and Requirements</a></li><li class="menu__list-item"><a class="menu__link menuLinkText_2aKo">Installation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/01-installation">Installing the CTI Adapter and Salesforce Lambdas</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/02-guided-setup">Setting Up The CTI Adapter Using Guided Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/03-managed-package-manual-setup">Setting Up The CTI Adapter Managed Package Manually</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/04-salesforce-lambdas-manual-setup">Setting Up The Salesforce Lambdas Manually</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/05-upgrading-from-an-earlier-version">Upgrading from an Earlier Version</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/06-adapter-installation-troubleshooting">CTI Adapter Installation Troubleshooting and Common Issues</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2aKo">CTI Adapter</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/01-cti-adapter-configuration">CTI Adapter Details</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/02-cti-attributes">CTI Attributes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/03-cti-flows">CTI Flow</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/04-presence-sync-rules">Presence Sync Rules</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/05-localization">Localization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/06-set-agent-status-on-session-end">Set Agent Status on Session End</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/07-contact-lens">Contact Lens</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/08-cti-actions">CTI Actions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/09-recording-controls">Recording Controls</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/10-voicemail-drops">Voicemail Drops</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/11-chat-widget-integration">Chat Widget Integration</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2aKo">Salesforce Lambdas</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/01-contact-flow-salesforce-lambdas">Accessing the Salesforce API from Amazon Connect Contact Flows Using AWS Lambda</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/02-historical-metrics">Amazon Connect Historical Metrics in Salesforce</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/03-real-time-metrics">Amazon Connect Real-Time Metrics in Salesforce</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/04-contact-channel-analytics">Contact Channel Analytics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/05-contact-trace-record-import">Contact Trace Record Import</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/06-postcall-contact-lens-import">Postcall Contact Lens Import</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2aKo">Appendices</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLinkText_2aKo" tabindex="0">Appendix A: Required Salesforce Configurations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-a-required-salesforce-configurations/01-configuring-my-domain">Configuring My Domain in Salesforce</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-a-required-salesforce-configurations/02-configure-salesforce-omnichannel">Configure Salesforce Omnichannel for Testing</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-b-configuring-salesforce-as-your-identity-provider/01-configuration">Appendix B: Configuring Salesforce as Your Identity Provider</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-c-cti-flow-sources-and-events/01-cti-flow-sources-and-events">Appendix C: CTI Flow Sources and Events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-d-cti-flow-examples/01-cti-flow-examples">Appendix D: CTI Flow Examples</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-e-salesforce-high-velocity-sales/01-high-velocity-sales">Appendix E: Integration with Salesforce High Velocity Sales</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-f-cti-flow-blocks/01-cti-flow-blocks">Appendix F: CTI Flow Blocks</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">Presence Sync Rules</h1></header><p>The CTI Adapter supports bidirectional synchronization of agent state
between Amazon Connect and Salesforce Omnichannel. This allows you to
tightly control agent availability for different contact/media types
dependent on current agent state. This section of the guide assumes that
you have Omnichannel configured appropriately. If you do not and wish to
test this function, please refer to the section <a href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-a-required-salesforce-configurations/02-configure-salesforce-omnichannel">Configure Salesforce Omnichannel for Testing</a>.</p><p>NOTE: In order for Presence Sync to work, the CTI Adapter must be
configured to allow it. See <a href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/01-cti-adapter-configuration">CTI Adapter Details</a>
for more information.</p><p>Presence Sync Rules are evaluated based on specific events. The
available events are:</p><ul><li><p><strong>Connect Agent State Change:</strong> The Connect agent&#x27;s state has
changed.</p></li><li><p><strong>Salesforce Agent State Change:</strong> The Salesforce agent&#x27;s state has
changed.</p></li><li><p><strong>Salesforce Agent Logout:</strong> The Salesforce agent has logged out.</p></li><li><p><strong>Salesforce Work Accepted:</strong> The Salesforce agent has accepted
work.</p></li><li><p><strong>Salesforce Workload Changed:</strong> The Salesforce agent&#x27;s workload has
changed.</p></li></ul><p>Once the event is triggered, the CTI adapter will evaluate the provided
criteria. The criteria is established by comparing Operand A, using
standard comparator options, against Operand B. Possible options for
Operand A and B are:</p><ul><li><p><strong>Connect Agent New State:</strong> The Connect agent&#x27;s new state value</p></li><li><p><strong>Connect Agent Old State:</strong> The Connect agent&#x27;s old (previous)
state value</p></li><li><p><strong>Salesforce Agent New State:</strong> The Salesforce agent&#x27;s new state
value</p></li><li><p><strong>Salesforce Service Channel:</strong> The service channel upon which the
Salesforce agent has accepted work</p></li><li><p><strong>Salesforce Previous Workload:</strong> The Salesforce agent&#x27;s previous
workload</p></li><li><p><strong>Salesforce Previous Workload Pct:</strong> The Salesforce agent&#x27;s
pervious workload expressed as a percent of configured capacity</p></li><li><p><strong>Salesforce New Workload:</strong> The Salesforce agent&#x27;s new workload</p></li><li><p><strong>Salesforce New Workload Pct:</strong> The Salesforce agent&#x27;s new workload
expressed as a percent of configured capacity</p></li><li><p><strong>Salesforce Configured Capacity:</strong> The Salesforce agent&#x27;s
configured capacity</p></li><li><p><strong>Static Value:</strong> The user may provide a value. For example, a
custom agent state name or other alphanumeric value. When Static
Value is selected a &quot;Value&quot; field becomes visible to accept the
users static value input.</p></li></ul><p>Available comparators are:</p><ul><li><p><strong>Equal to:</strong> Are Operand A and Operand B equal</p></li><li><p><strong>Not equal to:</strong> Are Operand A and Operand B not equal</p></li><li><p><strong>Greater than:</strong> Is Operand A greater than Operand B</p></li><li><p><strong>Greater than or equal to:</strong> Is Operand A greater than or equal to
Operand B</p></li><li><p><strong>Less than:</strong> Is Operand A less than Operand B</p></li><li><p><strong>Less than or equal to:</strong> Is Operand A less than or equal to
Operand B</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="configuring-statuses"></a>Configuring Statuses<a class="hash-link" href="#configuring-statuses" title="Direct link to heading">#</a></h3><p>Presence Sync Rules require statuses in both Amazon Connect and
Salesforce. In this example, we will add two additional statuses to each
side of the configuration and prepare rules that sync both clients to
the same state regardless of which agent sets the status. Essentially,
you will configure the status sync similar to the following example:</p><table><thead><tr><th>When a sets status to b</th><th>Set x to y</th></tr></thead><tbody><tr><td>Amazon Connect sets status to Available</td><td>Omnichannel to Available</td></tr><tr><td>Omnichannel sets status to Available</td><td>Amazon Connect to Available</td></tr><tr><td>Amazon Connect sets status to Working -- Phone</td><td>Omnichannel to Working -- Phone</td></tr><tr><td>Omnichannel sets status to Working -- Media</td><td>Amazon Connect to Working - Media</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="amazon-connect-system-statuses"></a>Amazon Connect System Statuses<a class="hash-link" href="#amazon-connect-system-statuses" title="Direct link to heading">#</a></h3><p>The following Amazon Connect CCP statuses are system statuses that can be used in presence sync.
Please note however that these statuses are restricted and you cannot set the Amazon Connect status
to the below.</p><ul><li>Busy - agent is in a call</li><li>Pending - agent is receiving a request for a queue callback</li><li>PendingBusy - agent is receiving call</li><li>CallingCustomer - agent is calling customer</li><li>AfterCallWork - agent is in the after call work screen</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="create-presence-statuses-in-amazon-connect"></a>Create Presence Statuses in Amazon Connect<a class="hash-link" href="#create-presence-statuses-in-amazon-connect" title="Direct link to heading">#</a></h3><p>Agents are responsible for setting their status in the Contact Control
Panel (CCP). Typically, the only time an agent\&#x27;s status changes is when
they manually change it in the CCP however Presence Sync Rules can
automate the process when conditions are met.</p><p>Amazon Connect provides two default status values:</p><ul><li><p>Available</p></li><li><p>Offline</p></li></ul><p>You can change the name of these values, and you can add new ones. For
example, you might add a status for Lunch, and another for Training.
These and the default status values will be used for reporting, metrics,
and resource management.</p><p><strong>Note:</strong> When you add a new status, it will always be <strong>Custom</strong>, not
routable.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="create-an-amazon-connect-status"></a>Create an Amazon Connect status<a class="hash-link" href="#create-an-amazon-connect-status" title="Direct link to heading">#</a></h4><ol><li><p>Login to your Amazon Connect instance as an Administrator</p></li><li><p>From the left navigation, choose <strong>Users</strong>, then select <strong>Agent
status</strong></p></li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image145.png"><ol start="3"><li><p>Select <strong>Add new agent status</strong></p></li><li><p>Provide a Status name and Description. Leave the Enabled checkbox
selected.</p></li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image146.png"><ol start="5"><li>Select Save. Repeat as desired for the remaining statuses that you
wish to add.</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="create-presence-statuses-in-salesforce"></a>Create Presence Statuses in Salesforce<a class="hash-link" href="#create-presence-statuses-in-salesforce" title="Direct link to heading">#</a></h3><p>You will need to configure presence statuses to reflect the different
presence states that you wish your Omni-Channel agents to enter. These
do not need to match agent statuses in Amazon Connect exactly, but it
does make it easier to track what you are doing.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="create-a-salesforce-presence-status"></a>Create a Salesforce presence status<a class="hash-link" href="#create-a-salesforce-presence-status" title="Direct link to heading">#</a></h4><ol><li><p>Log in into your Salesforce org and go to <strong>Setup</strong></p></li><li><p>In the <strong>Quick Find</strong> field, enter presence and choose <strong>Presence
Statuses</strong> from the results</p></li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image147.png"><ol start="3"><li><p>In the Presence Statuses page, choose New</p></li><li><p>Provide a status name, for example Lunch</p></li><li><p>Set the Status options appropriately, for example, Busy</p><p>a.  For Online statuses, you will need to provide a channel. Please
reference the <a href="https://help.salesforce.com/articleView?id=omnichannel_intro.htm&amp;type=5" target="_blank" rel="noopener noreferrer">Omni-Channel
documentation</a>
for details</p></li><li><p>Choose Save</p></li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image148.png"><ol start="7"><li>Repeat as necessary for all desired statuses</li></ol><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="configure-enabled-service-presences-status-access-in-salesforce"></a>Configure Enabled Service Presences Status Access in Salesforce<a class="hash-link" href="#configure-enabled-service-presences-status-access-in-salesforce" title="Direct link to heading">#</a></h4><ol><li><p>Log in into your Salesforce org and go to <strong>Setup</strong></p></li><li><p>In the <strong>Quick Find</strong> field, enter profiles and choose <strong>Profiles</strong>
from the results</p></li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image149.png"><ol start="3"><li><p>Select the profile assigned to your users</p></li><li><p>Hover over the Enabled Service Presence Status link and choose Edit</p></li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image150.png"><ol start="5"><li>Select the available status from the left, then choose the Add
button to add it the Enabled Service Presence Statuses field</li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image151.png"><ol start="6"><li><p>Select Save</p></li><li><p>Repeat as necessary for other statuses or profiles.</p></li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="configure-presence-sync-rules"></a>Configure Presence Sync Rules<a class="hash-link" href="#configure-presence-sync-rules" title="Direct link to heading">#</a></h3><p>The CTI Adapter provides a rules-based presence status synchronization
system allowing for flexibility in mapping agent states between Amazon
Connect and Salesforce Omni-Channel.</p><p>Presence synchronization actions may be configured based upon manual
agent state changes (agent goes on break), system agent state changes
(answering a call), omnichannel agent work (agent accepts an email), and
omnichannel workload changes (agent completes an email) as examples.</p><p>As the scope of presence sync rules can vary wildly, this example will
show you how to change state based on Amazon Connect agent state change
and Salesforce agent state change.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="create-a-presence-sync-rule"></a>Create a Presence Sync Rule<a class="hash-link" href="#create-a-presence-sync-rule" title="Direct link to heading">#</a></h4><ol><li><p>Log in into your Salesforce org and go to the <strong>Service Console</strong></p></li><li><p>Expand the <strong>navigation menu</strong> by selecting the down arrow and
choose <strong>AC CTI Adapters</strong>.</p></li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image114.png"><ol start="3"><li><p>Select <strong>ACLightningAdapter</strong></p></li><li><p>Scroll down to the <strong>Presence Sync Rules</strong> section</p></li><li><p>Select <strong>New</strong> to create a new presence sync rule</p></li><li><p>Provide a <strong>Presence Sync Rule Name</strong> to identify the use case of
this rule. For example: Connect agent switches to Lunch</p></li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image152.png"><ol start="7"><li><p>Select <strong>Next</strong></p></li><li><p>For Source, select <strong>Connect Agent State Change</strong>, and select
<strong>Next</strong></p></li><li><p>For Operand A, choose <strong>Connect Agent New State</strong></p></li><li><p>Set the Comparator to <strong>Equal to</strong></p></li><li><p>Set Operand B to <strong>Static Value</strong></p></li><li><p>For Operand B Value, enter <strong>Lunch</strong> (Or whatever state you have
created in Amazon Connect)**</p></li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image153.png"><ol start="13"><li><p>Select <strong>Next</strong></p></li><li><p>For Destination, choose <strong>Salesforce Agent State</strong></p></li><li><p>Set the Value to <strong>Lunch</strong> (Or whatever state you have configured in
Salesforce)
<strong>NOTE:</strong> the static value for Salesforce Omni-Channel status is the
Developer Name, not the Status Name</p></li><li><p>Select <strong>Save.</strong></p></li><li><p>Refresh your browser</p></li><li><p>In the bottom left corner of the Service Console, select the CTI
Softphone icon</p></li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image46.png"><ol start="19"><li>Set your Amazon Connect agent status to Lunch</li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image154.png"><ol start="20"><li>Observe that the Omni-Channel status switches to Lunch</li></ol><img src="/amazon-connect-salesforce-cti/img/lightning/image155.png"><ol start="21"><li>Repeat this process as desired to configure your presence sync
rules.</li></ol></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti/docs/lightning/03-cti-adapter/04-presence-sync-rules.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/03-cti-flows"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« CTI Flow</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/05-localization"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Localization Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#configuring-statuses" class="table-of-contents__link">Configuring Statuses</a></li><li><a href="#amazon-connect-system-statuses" class="table-of-contents__link">Amazon Connect System Statuses</a></li><li><a href="#create-presence-statuses-in-amazon-connect" class="table-of-contents__link">Create Presence Statuses in Amazon Connect</a></li><li><a href="#create-presence-statuses-in-salesforce" class="table-of-contents__link">Create Presence Statuses in Salesforce</a></li><li><a href="#configure-presence-sync-rules" class="table-of-contents__link">Configure Presence Sync Rules</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Amazon.com, Inc. or its affiliates. All Rights Reserved.</div></div></div></footer></div>
<script src="/amazon-connect-salesforce-cti/assets/js/runtime~main.c7e43b01.js"></script>
<script src="/amazon-connect-salesforce-cti/assets/js/main.70a2ce0a.js"></script>
</body>
</html>